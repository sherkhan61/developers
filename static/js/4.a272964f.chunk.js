(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{103:function(e,t,r){e.exports={profileInfo_wrapper:"ProfileInfo_profileInfo_wrapper__K1Tfx",userPhoto_block:"ProfileInfo_userPhoto_block__3U6ET",userPhoto:"ProfileInfo_userPhoto__FToHU",ownerPhoto:"ProfileInfo_ownerPhoto__32tCo",profileInfo:"ProfileInfo_profileInfo__2Qjgh",userName_container:"ProfileInfo_userName_container__2q5_u",userName:"ProfileInfo_userName__2mmNS",buttons:"ProfileInfo_buttons__38Gtk",error:"ProfileInfo_error__3gKs_"}},104:function(e,t,r){e.exports={profileStatus:"ProfileStatus_profileStatus__3ljpf",profileStatus_textarea:"ProfileStatus_profileStatus_textarea__uPwF6",userPhoto_block:"ProfileStatus_userPhoto_block__2Ot_6"}},105:function(e,t,r){e.exports={profileDescription:"ProfileDescription_profileDescription__1fO5V",about_wrapper:"ProfileDescription_about_wrapper__-Siz6",about:"ProfileDescription_about__3y2z1",about_item:"ProfileDescription_about_item__3gKOs",about_header:"ProfileDescription_about_header__MPP4W",editProfile_btn:"ProfileDescription_editProfile_btn__GM_5u"}},106:function(e,t,r){e.exports={profileForm:"ProfileForm_profileForm__paqUJ",profileForm_close:"ProfileForm_profileForm_close__2LxEr",name_wrapper:"ProfileForm_name_wrapper__3qDIy",info_box:"ProfileForm_info_box__1WRD2",contacts_item:"ProfileForm_contacts_item__1XLPq",editProfile_btn:"ProfileForm_editProfile_btn__gmCx5",error:"ProfileForm_error__2PEvp"}},107:function(e,t,r){e.exports={contacts:"Contacts_contacts__8ePKl",contacts_item:"Contacts_contacts_item__1wLTm",contacts_link:"Contacts_contacts_link__tsvxR",contacts_header:"Contacts_contacts_header__3xjP4"}},119:function(e,t,r){"use strict";r.r(t),r.d(t,"ProfilePage",(function(){return G}));var a=r(0),n=r.n(a),o=r(19),c=r(3),i=r(4),s=r(2),l=r.n(s),u=r(7),f=r(9),p=r(16),m=function(e){return{type:"SN/PROFILE/SET_USERS_PROFILE",profile:e}},_=function(e){return{type:"SN/PROFILE/SET_STATUS",status:e}},b=function(e){return{type:"SN/PROFILE/SAVE_PHOTO_SUCCESS",photos:e}},d=function(e){return{type:"SN/PROFILE/TOGGLE_IS_FOLLOWING",isFollowing:e}},E=function(e){return{type:"SN/PROFILE/IS_FOLLOWED",isFollowed:e}},h=function(e){return function(){var t=Object(u.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.getProfile(e);case 2:a=t.sent,r(m(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(u.a)(l.a.mark((function t(r,a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.saveProfile(e);case 2:if(0!==(n=t.sent).data.resultCode){t.next=9;break}if(!("userId"in a().auth.user)){t.next=7;break}return t.next=7,r(h(a().auth.user.userId));case 7:t.next=10;break;case 9:return t.abrupt("return",n.data.messages);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},v=r(37),O=r.n(v),g=r(103),w=r.n(g),N=r(14),F=r(104),k=r.n(F),x=function(e){var t=e.isOwner,r=Object(i.e)((function(e){return e.profilePage.status})),o=Object(a.useState)(null),c=Object(N.a)(o,2),s=c[0],p=c[1],m=Object(a.useState)(!1),b=Object(N.a)(m,2),d=b[0],E=b[1];Object(a.useEffect)((function(){p(r)}),[r]);var h=Object(i.d)();return n.a.createElement("div",{className:k.a.profileStatus},t&&d?n.a.createElement("textarea",{className:k.a.profileStatus_textarea,autoFocus:!0,onChange:function(e){return p(e.target.value)},onBlur:function(e){h(function(e){return function(){var t=Object(u.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.updateStatus(e);case 2:0===t.sent.resultCode&&r(_(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e.target.value)),E(!1)},value:s}):n.a.createElement("p",{style:t?{cursor:"pointer"}:{cursor:""},onClick:function(){return E(!0)}},r||"no- status"))},j=r(8),I=r(105),S=r.n(I),y=r(48),A=r(106),C=r.n(A),L=function(e){var t=e.profile,r=t.contacts,a=t.lookingForAJob,o=t.lookingForAJobDescription,c=t.fullName,s=e.closeEditMode,f=Object(i.d)(),p=Object(y.a)(),m=p.register,_=p.handleSubmit,b=p.errors,d=p.trigger,E=p.setError,h=function(){var e=Object(u.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(P(t));case 2:r=e.sent,Array.isArray(r)&&r.length>0?r.forEach((function(){return E("contactsErr",{type:"servererror",message:"Invalid Url Format"})})):s();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=Object.entries(r).map((function(e,t){return n.a.createElement("p",{key:t,className:C.a.contacts_item},e[0].charAt(0).toUpperCase()+e[0].slice(1),":",n.a.createElement("input",{className:C.a.contacts_input,onChange:function(){return d("contacts."+e[0])},ref:m({maxLength:{value:20,message:"ERROR"}}),name:"contacts."+e[0],defaultValue:e[1]}),n.a.createElement("p",{className:C.a.error},b.name))}));return n.a.createElement("form",{className:C.a.profileForm,onSubmit:_(h)},n.a.createElement("div",{className:C.a.profileForm_close,onClick:s},n.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}),n.a.createElement("small",null,"close")),n.a.createElement("section",{className:C.a.name_wrapper},n.a.createElement("p",null,"Full Name:",n.a.createElement("input",{ref:m,placeholder:"Full Name",name:"FullName",defaultValue:c})),n.a.createElement("p",null,"Looking for a Job:",n.a.createElement("select",{ref:m,name:"lookingForAJob",defaultValue:a?"yes":"no"},n.a.createElement("option",{value:"true"},"Yes"),n.a.createElement("option",{value:"false"},"No")))),n.a.createElement("p",null,"My professional skills:",n.a.createElement("input",{ref:m,name:"LookingForAJobDescription",defaultValue:o})),n.a.createElement("p",null,"About Me:",n.a.createElement("input",{ref:m,name:"AboutMe",defaultValue:"About me"})),n.a.createElement("p",{className:C.a.error},b.name),n.a.createElement("div",{className:C.a.info_box},v),n.a.createElement("button",{className:C.a.editProfile_btn},"Save"))},D=r(107),U=r.n(D),R=function(e){var t=e.contacts,r=Object.entries(t).map((function(e){return n.a.createElement("p",{className:U.a.contacts_item,key:e[0]},(t=e[0]).charAt(0).toUpperCase()+t.slice(1),": ",e[1]?n.a.createElement("a",{className:U.a.contacts_link,href:e[1]},e[1]):"...");var t}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("h3",{className:U.a.contacts_header},"Contacts"),n.a.createElement("section",{className:U.a.contacts},r))},J=function(e){var t=e.profile,r=e.isOwner,o=Object(a.useState)(!1),c=Object(N.a)(o,2),i=c[0],s=c[1];return n.a.createElement("div",{className:S.a.profileDescription},r&&i?n.a.createElement(L,{profile:t,closeEditMode:function(){return s(!1)}}):n.a.createElement("div",{className:S.a.about_wrapper},n.a.createElement("section",{className:S.a.about},n.a.createElement("h3",{className:S.a.about_header},"About"),n.a.createElement("p",{className:S.a.about_item},"Looking for a Job: ",t.lookingForAJob?"Yes":"No"),n.a.createElement("p",{className:S.a.about_item},"Looking for a job description: ",t.lookingForAJobDescription||"..."," ")),n.a.createElement(R,{contacts:t.contacts}),r?n.a.createElement("button",{className:S.a.editProfile_btn,onClick:function(e){e.preventDefault(),s(!0)}},"Edit Profile"):""))},T=function(e){var t=e.userId,r=e.profile,o=e.authUserId,c=e.myAva_img,s=e.isAuth,m=Object(i.d)(),_=t===o,h=Object(i.e)((function(e){return{followed:e.profilePage.followed,isFollowing:e.profilePage.isFollowing}}),i.c),P=h.followed,v=h.isFollowing;return Object(a.useEffect)((function(){s&&m(function(e){return function(){var t=Object(u.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.d.isFollowed(e);case 2:a=t.sent,r(E(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[m,t,s]),n.a.createElement("div",{className:w.a.profileInfo_wrapper},n.a.createElement("div",{className:w.a.userPhoto_block},n.a.createElement("label",null,n.a.createElement("img",{alt:"avatar",className:"".concat(w.a.userPhoto," ").concat(_&&w.a.ownerPhoto),src:c}),_&&n.a.createElement("input",{hidden:!0,onChange:function(e){var t;e.target.files.length&&m((t=e.target.files[0],function(){var e=Object(u.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.savePhoto(t);case 2:0===(a=e.sent).resultCode&&r(b(a.data.photos));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},type:"file"}))),n.a.createElement("section",{className:w.a.profileInfo},n.a.createElement("div",{className:w.a.userName_container},n.a.createElement("p",{className:w.a.userName},r.fullName),n.a.createElement(x,{isOwner:_}),n.a.createElement("div",{className:w.a.buttons},_||n.a.createElement(j.b,{to:"/dialogs/".concat(t)},n.a.createElement("button",null," Send message")),_||(P?n.a.createElement("button",{disabled:v,onClick:function(){return m(function(){var e=Object(u.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d(!0)),e.next=3,f.d.unfollow(r().profilePage.profile.userId);case 3:t(E(!1)),t(d(!1)),t(Object(p.b)(6,1));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},"Unfollow"):n.a.createElement("button",{disabled:v,onClick:function(){m(function(){var e=Object(u.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d(!0)),e.next=3,f.d.follow(r().profilePage.profile.userId);case 3:t(E(!0)),t(d(!1)),t(Object(p.b)(6,1));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}},"Follow")))),n.a.createElement(J,{profile:r,isOwner:_})))},M=r(21),V=function(){var e;!function(){var e=Object(c.g)();Object(i.e)((function(e){return e.auth.isAuth}))||e.push("/login")}();var t=Object(c.i)().userId,r=Object(i.d)(),o=Object(i.e)((function(e){return{profile:e.profilePage.profile,authUserId:e.auth.user.userId}}),i.c),s=o.profile,p=o.authUserId,b=Object(i.e)((function(e){return e.auth.isAuth})),d=t||p;return Object(a.useEffect)((function(){return b&&(r(h(+d)),r(function(e){return function(){var t=Object(u.a)(l.a.mark((function t(r){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.getStatus(e);case 2:a=t.sent,r(_(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(+d))),function(){r(m(null))}}),[t,r,b,d]),n.a.createElement(n.a.Fragment,null,s?n.a.createElement(n.a.Fragment,null,n.a.createElement(T,{authUserId:p,profile:s,userId:d,isAuth:b,myAva_img:(null===(e=s.photos)||void 0===e?void 0:e.small)||O.a})):n.a.createElement(M.a,null))},G=function(){return n.a.createElement(o.a,null,n.a.createElement(V,null))}}}]);
//# sourceMappingURL=4.a272964f.chunk.js.map