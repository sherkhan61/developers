(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{112:function(e,t,r){e.exports={profileInfo_wrapper:"ProfileInfo_profileInfo_wrapper__K1Tfx",userPhoto_block:"ProfileInfo_userPhoto_block__3U6ET",userPhoto:"ProfileInfo_userPhoto__FToHU",ownerPhoto:"ProfileInfo_ownerPhoto__32tCo",profileInfo:"ProfileInfo_profileInfo__2Qjgh",userName_container:"ProfileInfo_userName_container__2q5_u",userName:"ProfileInfo_userName__2mmNS",buttons:"ProfileInfo_buttons__38Gtk",error:"ProfileInfo_error__3gKs_"}},113:function(e,t,r){e.exports={profileStatus:"ProfileStatus_profileStatus__3ljpf",profileStatus_textarea:"ProfileStatus_profileStatus_textarea__uPwF6",userPhoto_block:"ProfileStatus_userPhoto_block__2Ot_6"}},114:function(e,t,r){e.exports={profileDescription:"ProfileDescription_profileDescription__1fO5V",about_wrapper:"ProfileDescription_about_wrapper__-Siz6",about:"ProfileDescription_about__3y2z1",about_item:"ProfileDescription_about_item__3gKOs",about_header:"ProfileDescription_about_header__MPP4W",editProfile_btn:"ProfileDescription_editProfile_btn__GM_5u"}},115:function(e,t,r){e.exports={profileForm:"ProfileForm_profileForm__paqUJ",profileForm_close:"ProfileForm_profileForm_close__2LxEr",name_wrapper:"ProfileForm_name_wrapper__3qDIy",info_box:"ProfileForm_info_box__1WRD2",contacts_item:"ProfileForm_contacts_item__1XLPq",editProfile_btn:"ProfileForm_editProfile_btn__gmCx5",error:"ProfileForm_error__2PEvp"}},116:function(e,t,r){e.exports={contacts:"Contacts_contacts__8ePKl",contacts_item:"Contacts_contacts_item__1wLTm",contacts_link:"Contacts_contacts_link__tsvxR",contacts_header:"Contacts_contacts_header__3xjP4"}},117:function(e,t,r){"use strict";r.r(t),r.d(t,"ProfilePage",(function(){return V}));var n=r(0),o=r(1),a=r(13),c=r(5),s=r(3),i=r(4),u=r.n(i),l=r(8),f=r(11),p=r(21),b=function(e){return{type:"SN/PROFILE/SET_USERS_PROFILE",profile:e}},j=function(e){return{type:"SN/PROFILE/SET_STATUS",status:e}},_=function(e){return{type:"SN/PROFILE/SAVE_PHOTO_SUCCESS",photos:e}},d=function(e){return{type:"SN/PROFILE/TOGGLE_IS_FOLLOWING",isFollowing:e}},h=function(e){return{type:"SN/PROFILE/IS_FOLLOWED",isFollowed:e}},O=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.getProfile(e);case 2:n=t.sent,r(b(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r,n){var o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.saveProfile(e);case 2:if(0!==(o=t.sent).data.resultCode){t.next=9;break}if(!("userId"in n().auth.user)){t.next=7;break}return t.next=7,r(O(n().auth.user.userId));case 7:t.next=10;break;case 9:return t.abrupt("return",o.data.messages);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},x=r(45),P=r(112),v=r.n(P),g=r(14),w=r(113),N=r.n(w),F=function(e){var t=e.isOwner,r=Object(s.e)((function(e){return e.profilePage.status})),a=Object(o.useState)(null),c=Object(g.a)(a,2),i=c[0],p=c[1],b=Object(o.useState)(!1),_=Object(g.a)(b,2),d=_[0],h=_[1];Object(o.useEffect)((function(){p(r)}),[r]);var O=Object(s.d)();return Object(n.jsx)("div",{className:N.a.profileStatus,children:t&&d?Object(n.jsx)("textarea",{className:N.a.profileStatus_textarea,autoFocus:!0,onChange:function(e){return p(e.target.value)},onBlur:function(e){O(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.updateStatus(e);case 2:0===t.sent.resultCode&&r(j(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e.target.value)),h(!1)},value:i}):Object(n.jsx)("p",{style:t?{cursor:"pointer"}:{cursor:""},onClick:function(){return h(!0)},children:r||"no- status"})})},k=r(9),I=r(114),S=r.n(I),y=r(46),E=r(115),A=r.n(E),C=function(e){var t=e.profile,r=t.contacts,o=t.lookingForAJob,a=t.lookingForAJobDescription,c=t.fullName,i=e.closeEditMode,f=Object(s.d)(),p=Object(y.a)(),b=p.register,j=p.handleSubmit,_=p.errors,d=p.trigger,h=p.setError,O=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(m(t));case 2:r=e.sent,Array.isArray(r)&&r.length>0?r.forEach((function(){return h("contactsErr",{type:"servererror",message:"Invalid Url Format"})})):i();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object.entries(r).map((function(e,t){return Object(n.jsxs)("p",{className:A.a.contacts_item,children:[e[0].charAt(0).toUpperCase()+e[0].slice(1),":",Object(n.jsx)("input",{className:A.a.contacts_input,onChange:function(){return d("contacts."+e[0])},ref:b({maxLength:{value:20,message:"ERROR"}}),name:"contacts."+e[0],defaultValue:e[1]}),Object(n.jsx)("p",{className:A.a.error,children:_.name})]},t)}));return Object(n.jsxs)("form",{className:A.a.profileForm,onSubmit:j(O),children:[Object(n.jsxs)("div",{className:A.a.profileForm_close,onClick:i,children:[Object(n.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}),Object(n.jsx)("small",{children:"close"})]}),Object(n.jsxs)("section",{className:A.a.name_wrapper,children:[Object(n.jsxs)("p",{children:["Full Name:",Object(n.jsx)("input",{ref:b,placeholder:"Full Name",name:"FullName",defaultValue:c})]}),Object(n.jsxs)("p",{children:["Looking for a Job:",Object(n.jsxs)("select",{ref:b,name:"lookingForAJob",defaultValue:o?"yes":"no",children:[Object(n.jsx)("option",{value:"true",children:"Yes"}),Object(n.jsx)("option",{value:"false",children:"No"})]})]})]}),Object(n.jsxs)("p",{children:["My professional skills:",Object(n.jsx)("input",{ref:b,name:"LookingForAJobDescription",defaultValue:a})]}),Object(n.jsxs)("p",{children:["About Me:",Object(n.jsx)("input",{ref:b,name:"AboutMe",defaultValue:"About me"})]}),Object(n.jsx)("p",{className:A.a.error,children:_.name}),Object(n.jsx)("div",{className:A.a.info_box,children:x}),Object(n.jsx)("button",{className:A.a.editProfile_btn,children:"Save"})]})},L=r(116),D=r.n(L),U=function(e){var t=e.contacts,r=Object.entries(t).map((function(e){return Object(n.jsxs)("p",{className:D.a.contacts_item,children:[(t=e[0],t.charAt(0).toUpperCase()+t.slice(1)),": ",e[1]?Object(n.jsx)("a",{className:D.a.contacts_link,href:e[1],children:e[1]}):"..."]},e[0]);var t}));return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h3",{className:D.a.contacts_header,children:"Contacts"}),Object(n.jsx)("section",{className:D.a.contacts,children:r})]})},R=function(e){var t=e.profile,r=e.isOwner,a=Object(o.useState)(!1),c=Object(g.a)(a,2),s=c[0],i=c[1];return Object(n.jsx)("div",{className:S.a.profileDescription,children:r&&s?Object(n.jsx)(C,{profile:t,closeEditMode:function(){return i(!1)}}):Object(n.jsxs)("div",{className:S.a.about_wrapper,children:[Object(n.jsxs)("section",{className:S.a.about,children:[Object(n.jsx)("h3",{className:S.a.about_header,children:"About"}),Object(n.jsxs)("p",{className:S.a.about_item,children:["Looking for a Job: ",t.lookingForAJob?"Yes":"No"]}),Object(n.jsxs)("p",{className:S.a.about_item,children:["Looking for a job description: ",t.lookingForAJobDescription||"..."," "]})]}),Object(n.jsx)(U,{contacts:t.contacts}),r?Object(n.jsx)("button",{className:S.a.editProfile_btn,onClick:function(e){e.preventDefault(),i(!0)},children:"Edit Profile"}):""]})})},J=function(e){var t=e.userId,r=e.profile,a=e.authUserId,c=e.myAva_img,i=e.isAuth,b=Object(s.d)(),j=t===a,O=Object(s.e)((function(e){return{followed:e.profilePage.followed,isFollowing:e.profilePage.isFollowing}}),s.c),m=O.followed,x=O.isFollowing;return Object(o.useEffect)((function(){i&&b(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.d.isFollowed(e);case 2:n=t.sent,r(h(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[b,t,i]),Object(n.jsxs)("div",{className:v.a.profileInfo_wrapper,children:[Object(n.jsx)("div",{className:v.a.userPhoto_block,children:Object(n.jsxs)("label",{children:[Object(n.jsx)("img",{alt:"avatar",className:"".concat(v.a.userPhoto," ").concat(j&&v.a.ownerPhoto),src:c}),j&&Object(n.jsx)("input",{hidden:!0,onChange:function(e){var t;e.target.files.length&&b((t=e.target.files[0],function(){var e=Object(l.a)(u.a.mark((function e(r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.b.savePhoto(t);case 2:0===(n=e.sent).resultCode&&r(_(n.data.photos));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},type:"file"})]})}),Object(n.jsxs)("section",{className:v.a.profileInfo,children:[Object(n.jsxs)("div",{className:v.a.userName_container,children:[Object(n.jsx)("p",{className:v.a.userName,children:r.fullName}),Object(n.jsx)(F,{isOwner:j}),Object(n.jsxs)("div",{className:v.a.buttons,children:[j||Object(n.jsx)(k.b,{to:"/dialogs/".concat(t),children:Object(n.jsx)("button",{children:" Send message"})}),j||(m?Object(n.jsx)("button",{disabled:x,onClick:function(){return b(function(){var e=Object(l.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d(!0)),e.next=3,f.d.unfollow(r().profilePage.profile.userId);case 3:t(h(!1)),t(d(!1)),t(Object(p.b)(6,1));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())},children:"Unfollow"}):Object(n.jsx)("button",{disabled:x,onClick:function(){b(function(){var e=Object(l.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(d(!0)),e.next=3,f.d.follow(r().profilePage.profile.userId);case 3:t(h(!0)),t(d(!1)),t(Object(p.b)(6,1));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())},children:"Follow"}))]})]}),Object(n.jsx)(R,{profile:r,isOwner:j})]})]})},T=r(10),M=function(){var e;!function(){var e=Object(c.g)();Object(s.e)((function(e){return e.auth.isAuth}))||e.push("/login")}();var t=Object(c.i)().userId,r=Object(s.d)(),a=Object(s.e)((function(e){return{profile:e.profilePage.profile,authUserId:e.auth.user.userId}}),s.c),i=a.profile,p=a.authUserId,_=Object(s.e)((function(e){return e.auth.isAuth})),d=t||p;return Object(o.useEffect)((function(){return _&&(r(O(+d)),r(function(e){return function(){var t=Object(l.a)(u.a.mark((function t(r){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.b.getStatus(e);case 2:n=t.sent,r(j(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(+d))),function(){r(b(null))}}),[t,r,_,d]),Object(n.jsx)(n.Fragment,{children:i?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(J,{authUserId:p,profile:i,userId:d,isAuth:_,myAva_img:(null===(e=i.photos)||void 0===e?void 0:e.small)||x.a})}):Object(n.jsx)(T.a,{})})},V=function(){return Object(n.jsx)(a.a,{children:Object(n.jsx)(M,{})})}}}]);
//# sourceMappingURL=3.fb33c4a1.chunk.js.map